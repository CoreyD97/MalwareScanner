package com.coreyd97.antivirus.client.ui;

import com.coreyd97.antivirus.common.taskscheduler.ScanTask;
import com.coreyd97.antivirus.common.taskscheduler.Task;
import com.coreyd97.antivirus.common.taskscheduler.TaskSchedulerListener;

import javax.swing.*;
import java.util.HashMap;

public class ScanDetailsTabbedPanel extends JTabbedPane implements TaskSchedulerListener {

    HashMap<ScanTask, ActiveScanPanel> taskScanPanels;

    public ScanDetailsTabbedPanel() {
        this.taskScanPanels = new HashMap<>();
    }

    @Override
    public void onTaskAdded(Task task) {
        if(task instanceof ScanTask){
            ActiveScanPanel activeScanPanel = new ActiveScanPanel((ScanTask) task);
            this.taskScanPanels.put((ScanTask) task, activeScanPanel);
            this.addTab(task.getName(), activeScanPanel);
            this.revalidate();
            this.repaint();
        }
    }

    @Override
    public void onTaskRemoved(Task task) {
        //Clean up ui elements
        ActiveScanPanel activeScanPanel = this.taskScanPanels.remove(task);
//        activeScanPanel.dispose();
//        this.remove(activeScanPanel);
        this.revalidate();
        this.repaint();
    }

    @Override
    public void onTaskException(Task task, Throwable throwable) {

    }
}
