package com.coreyd97.antivirus.common.taskscheduler;

import com.coreyd97.antivirus.common.report.Report;
import com.coreyd97.antivirus.common.report.ResultsReport;
import com.coreyd97.antivirus.common.report.ScanReport;

import java.util.ArrayList;


//TODO Decide on streaming or packaging scan data
public abstract class AnalysisTask extends Task {
    protected ScanReport[] reports;
    protected ResultsReport resultsReport;

    protected AnalysisTask(String taskName, ScanReport[] reports, ResultsReport resultsReport) {
        super(taskName);
        this.reports = reports;
        this.resultsReport = resultsReport;
    }

    //Implement in subclasses to define handling of each file.
    protected abstract void processReport(ScanReport report);

    public Report call() throws Exception{
        taskStart(reports.length);
        for (ScanReport report : reports) {
            processReport(report);
            taskProgress();
        }
        taskComplete();
        return resultsReport;
    }
}
